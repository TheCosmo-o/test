<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MÃ³j Ruchomy JeÅ¼ ðŸ¦”</title>
<style>
  body {
    font-family: "Segoe UI", sans-serif;
    background: linear-gradient(to bottom, #d6e3b3, #a9c27d); /* zieleÅ„ leÅ›na */
    margin: 0;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .card {
    background: #fff8ec; /* kremowy jak podÅ›ciÃ³Å‚ka w lesie */
    border-radius: 1.5rem;
    padding: 2rem;
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    width: 340px;
    text-align: center;
    border: 2px solid #b17c3a; /* ciepÅ‚y brÄ…z */
  }

  .hedgehog {
    width: 130px;
    height: 130px;
    margin: 0 auto 12px;
    animation: sniff 2.5s ease-in-out infinite;
  }

  @keyframes sniff {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    25% { transform: translateY(-4px) rotate(-2deg); }
    75% { transform: translateY(-4px) rotate(2deg); }
  }

  .bar {
    height: 10px;
    background: #e0d7c2;
    border-radius: 10px;
    overflow: hidden;
    margin: 8px 0 20px;
  }

  .fill {
    height: 100%;
    background: linear-gradient(to right, #b17c3a, #d9a05b);
    width: 50%;
    transition: width 0.3s;
  }

  .task {
    border: 1px solid #c5a670;
    background: #fffdf6;
    padding: 8px;
    border-radius: 8px;
    margin: 6px 0;
    cursor: pointer;
    user-select: none;
    transition: background 0.3s;
  }

  .task:hover {
    background: #f3e6c7;
  }

  .task.done {
    background: #d8e3b9;
    text-decoration: line-through;
    color: #5b4a27;
  }

  button {
    background: #b17c3a;
    color: white;
    border: none;
    border-radius: 8px;
    padding: 10px 16px;
    cursor: pointer;
    font-weight: bold;
    transition: background 0.3s;
  }

  button:hover {
    background: #8c5f25;
  }

  footer {
    margin-top: 10px;
    font-size: 0.8rem;
    color: #5b4a27;
    opacity: 0.7;
  }

  .add-task {
  display: flex;
  gap: 6px;
  margin-bottom: 14px;
  margin-top:10%;
}

.add-task input {
  flex: 1;
  padding: 8px;
  border: 1px solid #c5a670;
  border-radius: 8px;
  font-size: 0.9rem;
  background: #fffdf6;
}

.add-task input:focus {
  outline: none;
  border-color: #b17c3a;
  box-shadow: 0 0 4px #d9a05b;
}

.add-task button {
  background: #b17c3a;
  color: white;
  border: none;
  border-radius: 8px;
  padding: 8px 10px;
  cursor: pointer;
  font-weight: bold;
  transition: background 0.3s;
}

.add-task button:hover {
  background: #8c5f25;
}

.task {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.delete-btn {
  background: none;
  border: none;
  color: #8c5f25;
  font-size: 1rem;
  cursor: pointer;
  transition: color 0.2s;
}

.delete-btn:hover {
  color: #b91c1c; /* czerwony przy najechaniu */
}

</style>

</head>
<body>
  <div class="card">
    <h1>ðŸ¦” Stefek ðŸ¦” </h1>

    <!-- ðŸ¦” Obrazek chomika -->
    <div id="hamster" class="hamster">
      <img id="hamsterImg" src="zdj1.png" alt="Chomik" width="120" height="120" />
    </div>

    <p>NastrÃ³j: <span id="mood">0</span>/100</p>
    <div class="bar"><div class="fill" id="bar"></div></div>

    <div id="tasks"></div>
    <button id="reset">ðŸ”„ Nowy dzieÅ„</button> <br>

    <div class="add-task">
  <input id="newTaskText" type="text" placeholder="âœï¸ Nowe zadanie..." />
  <button id="addTask">âž• Dodaj</button>
</div>

  </div>


  <script>
 // --- DOMYÅšLNE ZADANIA ---
const tasksDefault = [
  { id: 1, text: "Umyj zÄ™by", done: false },           // prosta codzienna czynnoÅ›Ä‡
  { id: 2, text: "Napij siÄ™ wody", done: false },     // drobna potrzeba fizyczna
  { id: 3, text: "ZrÃ³b 1 gÅ‚Ä™boki oddech", done: false }, // mindfulness
  { id: 4, text: "PosÅ‚uchaj ulubionej muzyki", done: false }, // maÅ‚a przyjemnoÅ›Ä‡
  { id: 5, text: "ZrÃ³b maÅ‚y spacer lub wyjrzyj za okno", done: false }, // lekki ruch
  { id: 6, text: "Napisz 1 pozytywnÄ… rzecz o sobie", done: false }, // self-compassion
];

// --- INICJALIZACJA ---
let tasks = JSON.parse(localStorage.getItem("tasks")) || tasksDefault;

// Poprawne pobieranie mood z localStorage, start od 0
let savedMood = localStorage.getItem("mood");
let mood = savedMood !== null ? JSON.parse(savedMood) : 0;

const hamsterImg = document.getElementById("hamsterImg");
const moodText = document.getElementById("mood");
const bar = document.getElementById("bar");
const tasksDiv = document.getElementById("tasks");

// --- FUNKCJE ---
function updateHamster() {
  moodText.textContent = mood;
  bar.style.width = mood + "%";
}

function save() {
  localStorage.setItem("tasks", JSON.stringify(tasks));
  localStorage.setItem("mood", JSON.stringify(mood));
}

// Renderowanie listy zadaÅ„
function renderTasks() {
  tasksDiv.innerHTML = "";
  tasks.forEach(t => {
    const el = document.createElement("div");
    el.className = "task" + (t.done ? " done" : "");

    const text = document.createElement("span");
    text.textContent = t.text;
    text.onclick = () => toggleTask(t.id);

    const delBtn = document.createElement("button");
    delBtn.textContent = "âŒ";
    delBtn.className = "delete-btn";
    delBtn.onclick = (e) => {
      e.stopPropagation(); // nie odznacza zadania
      deleteTask(t.id);
    };

    el.appendChild(text);
    el.appendChild(delBtn);
    tasksDiv.appendChild(el);
  });
}

// Odtwarzanie gifÃ³w przy zmianie statusu zadania
function showHamsterGif(gif) {
  hamsterImg.src = gif;
  setTimeout(() => {
    hamsterImg.src = "zdj1.png";
  }, 2000);
}

// Zaznaczanie/odznaczanie zadania i zmiana nastroju
function toggleTask(id) {
  const task = tasks.find(t => t.id === id);
  const wasDone = task.done;
  task.done = !task.done;

  if (!wasDone && task.done) {
    mood = Math.min(100, mood + 15);
    showHamsterGif("gif1.gif");
  } else if (wasDone && !task.done) {
    mood = Math.max(0, mood - 15);
    showHamsterGif("gif2.gif");
  }

  save();
  updateHamster();
  renderTasks();
}

// Usuwanie zadania
function deleteTask(id) {
  tasks = tasks.filter(t => t.id !== id);
  save();
  renderTasks();
}

// Dodawanie nowego zadania
document.getElementById("addTask").onclick = () => {
  const input = document.getElementById("newTaskText");
  const text = input.value.trim();
  if (text === "") return;

  const newTask = {
    id: Date.now(),
    text: text,
    done: false
  };

  tasks.push(newTask);
  save();
  renderTasks();
  input.value = "";
};

// Dodawanie przez Enter
document.getElementById("newTaskText").addEventListener("keypress", (e) => {
  if (e.key === "Enter") {
    document.getElementById("addTask").click();
  }
});

// Resetowanie â€žNowy dzieÅ„â€
document.getElementById("reset").onclick = () => {
  // Odznaczamy tylko domyÅ›lne zadania
  tasks = tasks.map(t => {
    const defaultTask = tasksDefault.find(dt => dt.id === t.id);
    if (defaultTask) {
      return { ...t, done: false };
    } else {
      return t; // zadania dodane przez uÅ¼ytkownika zostajÄ…
    }
  });

  mood = 0; // reset nastroju do zera
  save();
  updateHamster();
  renderTasks();
  hamsterImg.src = "zdj1.png";
};

// --- URUCHOMIENIE ---
updateHamster();
renderTasks();


  </script>
</body>
</html>
